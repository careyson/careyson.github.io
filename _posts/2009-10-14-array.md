---
layout: post
title: "对于 飞林沙的<把Array说透>的扩展"
date: 2009-10-14
categories: blog
tags: [博客园迁移]
---

  
今天看到 [飞林沙](http://www.cnblogs.com/kym/)同学的两个帖子  
[把Array说透](http://www.cnblogs.com/kym/archive/2009/10/09/1579958.html "把Array说透")和[把Array说透序一](http://www.cnblogs.com/kym/archive/2009/10/09/1579958.html "把Array说透序一")这两个帖子都是从很底层的原理以及来说Array数组，看了让人很受启发，所以我想写一篇从FCL的角度来阐述数组的文章，权当抛砖引玉，高手请飘走....  
  
**System.Array  
** 地球人都知道，所有的数组都是隐式的派生于这个基类。在MSDN里可以发现System.Array的原型是:  
  


1 \[SerializableAttribute\]  
2 \[ComVisibleAttribute\(true\)\]  
3 public abstract class Array : ICloneable,   
4 IList, ICollection, IEnumerable  
5

  
而几乎所有Array所具备的功能都是实现这几个接口.下面说说这几个接口之间的关系。  
  
**IEnumerable**  
这个接口就是传说中的祖宗，是IList和ICollection接口的父接口.这个接口只有一个方法.GetEnumerator\(\),这也是.net FCL对实现迭代器模式的接口。在.net中，所有实现了IEnumerable接口的类才能用foreach关键字进行遍历.  
**IEnumberator  
实现**IEnumberator接口的类是IEnumerable接口GetEnumerator\(\)方法返回的类型，表示是集合中当前的元素,实现IEnumberator接口需要实现两个方法和一个属性  
IEnumberator内部有MoveNext\(\)方法和Reset\(\)方法,从名字不难看出,前者的用处是返回集合中下一个需要被遍历的元素，而Reset\(\)方法让当前的Enumberator回到集合中的第一个元素.  
IEnumberator还有Current属性，返回集合中Enumberator中当前的元素.  
下面通过MSDN中的代码来对这两个接口进行说明:  


![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedBlock.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockStart.gif)Msdn中对IEunmerable接口的代码演示  
1![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)using System;  
2![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)using System.Collections;  
3![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)  
4![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)public class Person  
5![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedBlock.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
6![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public Person\(string fName, string lName\)  
7![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
8![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) this.firstName = fName;  
9![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) this.lastName = lName;  
10![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
11![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
12![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public string firstName;  
13![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public string lastName;  
14![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockEnd.gif)\}  
15![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)  
16![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)public class People : IEnumerable  
17![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedBlock.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
18![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) private Person\[\] \_people;  
19![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public People\(Person\[\] pArray\)  
20![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
21![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \_people = new Person\[pArray.Length\];  
22![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
23![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) for \(int i = 0; i < pArray.Length; i++\)  
24![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
25![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \_people\[i\] = pArray\[i\];  
26![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
27![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
28![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
29![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public IEnumerator GetEnumerator\(\)  
30![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
31![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) return new PeopleEnum\(\_people\);  
32![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
33![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockEnd.gif)\}  
34![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)  
35![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)public class PeopleEnum : IEnumerator  
36![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedBlock.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
37![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public Person\[\] \_people;  
38![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
39![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) // Enumerators are positioned before the first element  
40![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) // until the first MoveNext\(\) call.  
41![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) int position = -1;  
42![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
43![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public PeopleEnum\(Person\[\] list\)  
44![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
45![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \_people = list;  
46![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
47![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
48![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public bool MoveNext\(\)  
49![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
50![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) position++;  
51![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) return \(position < \_people.Length\);  
52![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
53![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
54![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public void Reset\(\)  
55![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
56![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) position = -1;  
57![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
58![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
59![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) public object Current  
60![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
61![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) get  
62![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
63![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) try  
64![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
65![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) return \_people\[position\];  
66![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
67![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) catch \(IndexOutOfRangeException\)  
68![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
69![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) throw new InvalidOperationException\(\);  
70![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
71![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
72![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
73![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockEnd.gif)\}  
74![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)  
75![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)class App  
76![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedBlock.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
77![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) static void Main\(\)  
78![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
79![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) Person\[\] peopleArray = new Person\[3\]  
80![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedSubBlock.gif) ![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-dot.gif)\{  
81![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) new Person\("John", "Smith"\),  
82![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) new Person\("Jim", "Johnson"\),  
83![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) new Person\("Sue", "Rabon"\),  
84![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \};  
85![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
86![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) People peopleList = new People\(peopleArray\);  
87![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) foreach \(Person p in peopleList\)  
88![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) Console.WriteLine\(p.firstName + " " + p.lastName\);  
89![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif)  
90![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedSubBlockEnd.gif) \}  
91![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockEnd.gif)\}  
92![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)  
93![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockStart.gif)![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ContractedBlock.gif)/\*\*//\* This code produces output similar to the following:  
94![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \*   
95![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \* John Smith  
96![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \* Jim Johnson  
97![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \* Sue Rabon  
98![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-InBlock.gif) \*   
99![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-ExpandedBlockEnd.gif) \*/  
100![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)  
101![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)  
102![image](https://cdn.jsdelivr.net/gh/careyson/careyson.github.io@main/assets/images/2009-10-14-array/array-None.gif)

  
**ICollection  
**这个接口直接继承自IEnumerable接口，这个接口是System.Collections命名空间的基本接口,从这个接口开始就有一些数组特性了. 实现ICollection接口需要实现4个方法（包括从IEnumerable继承来的一个方法），和一个属性  
ICollection所具有的3个方法是AddAt，AddItem,Item这三个方法，AddAt和AddItem方法均是添加一个元素到集合，AddAt可以选择集合中的任何位置进行插入，而AddItem方法默认将元素插入队尾。  
ICollection的属性是表示当前集合大小的Count属性.  
**IList  
** IList又直接继承与ICollection接口和IEnumerable接口，从IList开始,集合开始拥有更强大的功能，可以简单理解为IList主要针对动态集合，而ICollection主要针对静态集合.IList里包含了操作集合比较完整的方法，比如添加元素的Add方法，插入到指定元素的Insert方法，清楚所有元素的Clear方法，以及是否存在元素的Contains方法.  
  
**Array与IList  
** 虽然Array实现了IList接口,但Array中并不支持IList中的某些方法。比如Contains这样的方法。有人会好奇为什么Array实现了IList接口还不能使用里面的方法呢？因为C\#中数组是定长的，而IList是动态的，所以FCL中通过**显式实现** IList中的某些方法是Array不具有IList中的某些方法。如果想在Array中使用IList的方法，那首先要将Array转换为IList  
  
**IList实现了ICollection,而ICollection实现了IEnumerable，为什么数组还要实现上面3个接口呢，实现IList不就好吗  
** 这个问题我在网上查的资料有两点  
1.提高代码可读性（这个我想是最重要一条）  
2.方便类型转换（其实这个也是提高代码可读性的一部分）  
  
**ICloneable  
** 这个接口自成一家,和其他Array实现的接口毫不相干，这个接口是FCL实现设计模式中的原型模式\(prototype\)，在这里其实就是浅复制\(shallow copy\)功能.  
  
**IList <T>,IEnumerable<T>,IEnumerat****or <T>  
** 这几个接口都是.net 2.0引入的泛型接口，上面所说的接口中除了ICloneable的其他接口都存在于System.Collections命名空间中，而泛型接口存在于System.Collections.Generics命名空间中。泛型我想大家都不陌生了，这里就不讨论了，在这里只想说有了泛型后，前面的接口可以基本不用了:-\)  
  
  
高手请拍砖................  

