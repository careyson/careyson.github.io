---
layout: post
title: "<译>12个asp.net MVC最佳实践"
date: 2009-10-31
categories: blog
tags: [博客园迁移]
---

上一周我我在罗马进行了两场对于开发完成不久的<http://www.dotnetromacesta.org/>的Asp.net MVC的演讲。而其中一场演讲内容是关于我对于Asp.net MVC最佳实践的看法.因为这场演讲是在意大利进行的，为了大家能更好的阅读，我将演讲所用的[ppt](http://codeclimber.googlecode.com/svn/CommunityTalks/October%2009%20-%20DotNetRomaCesta/ASPNET%20MVC%20Framework%20-%20Best%20Practices%20-%20ENG.pptx)翻译成英文。

### **关于Controller的最佳实践**

> #### **1-删除AccountController**
> 
> 让Demo代码在你的程序中是一个非常不好的做法。请永远不要使用AccountController.
> 
> #### **2-隔离外部网络和Controller**
> 
> 如果依赖HttpContext，数据访问类，配置，日志等，则会让程序难以测试，修改或者进一步开发。
> 
> #### **3-使用一个IOC容器**
> 
> 使达到第二条最佳实践更加容易，使用IOC容器管理所有外部依赖[我使用](http://codeclimber.net.nz/archive/2009/10/15/my-asp.net-mvc-stack-and-why-i-chosen-it.aspx) [Ninject v2](http://codeclimber.net.nz/archive/2009/08/10/how-to-use-ninject-2-with-asp.net-mvc.aspx)，这种IOC容器有很多，如果需要的话，你甚至可以自己实现一个。
> 
> #### **4-和“神奇的strings”说不**
> 
> **** 永远不要使用 _ViewData\[“key”\]，_ 而要为每一个视图创建一个ViewModel,从而使用强类型的 _ViewPage <ViewModel>._
> 
> 神奇的Strings是很邪恶的，因为你可能由于错误的拼写而导致视图出错,而强类型的Model不仅可以有智能感知，而且错误是在编译时获取而不是在运行时。
> 
> #### **5-创建你自己的“个人惯例”**
> 
> 使用Asp.net MVC作为你个人（或者公司）的参考构架的基础，你还可以使Controller和View继承于你自己的基类而不是默认的基类来让你的惯例更加透彻。
> 
> #### **6-注意Verbs**
> 
> 就算不使用最合适的HTTP Verb,最要也要采用[PRG](http://blog.eworldui.net/post/2008/05/ASPNET-MVC---Using-Post2c-Redirect2c-Get-Pattern.aspx)模式，[\(Post-Redirect-Get\)](http://blog.eworldui.net/post/2008/05/ASPNET-MVC---Using-Post2c-Redirect2c-Get-Pattern.aspx):使用Get来显示数据，使用Post来修改数据。

### **关于Model的最佳实践**

> #### **7–DomainModel \!= ViewModel**
> 
> **** DomainModel代表着相应的域，但ViewModel却是为View的需要而创建。这两者之间或许\(一般情况下都\)是不同的，此外DomainModel是数据加上行为的组合体，是由复杂的变量类型组成的并且具有层次。而ViewModel只是由一些String等简单变量类型组成。如果想移除冗余并且容易导致出错的ORM代码,可以使用[AutoMapper](http://www.codeplex.com/AutoMapper).如果想要了解更多，我推荐阅读：[ASP.NET MVC View Model Patterns](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx).
> 
> #### **8-为“共享”的数据使用ActionFilter**
> 
> 这是我自己的解决方案，或许需要在未来发帖继续探讨。通常情况下，你都不希望你的Controller获取的数据在几个不同的View之间共享，我的方法则是使用ActionFilter来获取在几个不同View之间共享的数据，然后用合适的View来显示。

### **关于View的最佳实践**

> #### **9-不要使用CodeBehind模式**
> 
> 永远不要。
> 
> #### **10-尽可能的写HTML代码**
> 
> 我认为Web开发人员必须的习惯于写HTML\(或者CSS和JAVASCRIPT\).所以最好少用仅仅用来隐藏HTML代码的HTMLHelper（比如HTML.Submit或者HTML.Button）.这也是我会在未来的帖子里讨论的。
> 
> #### **11-如果有if语句，使用HTMLHelper**
> 
> View必须是哑巴（Controller是瘦子而Model是胖子）,如果你发现自己在使用if语句，那就写一个HTMLHelper来隐藏选择条件语句.
> 
> #### **12-仔细的选择你的View引擎**
> 
> 默认的引擎室WebFormViewEngine，IMHO并不是最好的引擎，[我更倾向](http://codeclimber.net.nz/archive/2009/10/15/my-asp.net-mvc-stack-and-why-i-chosen-it.aspx)于选择[Spark ViewEngine](http://sparkviewengine.com/),因为对于我来说这个引擎更适合MVC的View.我喜欢的是 _“dominates the flow and that code should fit seamlessly”_ 对于每一次循环来说IF语句都会被定义在”HTML标签“中.

### **DEMO代码和幻灯片的下载**

你可以下载[幻灯片](http://codeclimber.googlecode.com/svn/CommunityTalks/October%2009%20-%20DotNetRomaCesta/ASPNET%20MVC%20Framework%20-%20Best%20Practices%20-%20ENG.pptx)或者[demo代码](http://codeclimber.googlecode.com/svn/CommunityTalks/October%2009%20-%20DotNetRomaCesta/BestPractice-Demo.zip)

原文链接：<http://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx>
